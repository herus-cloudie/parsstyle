'use client'

import { useEffect, useState } from 'react'
import Loaders from '../module/loaders';
import { sp } from '@/utils/changeFormat';
import DeleteBtn from '../module/deleteBtn';
import Link from 'next/link';

const CartPage = () => {
  const [state, setState] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    async function GetData() {
       setLoading(true)
       let progress = await fetch('/api/cart')
       let Data = await progress.json();
       setState(Data.cart)
       setLoading(false)
   }
   GetData()
} , [])
  let Discount = []; 
  let allPrice = state.map(item => +item.price)
  const finalPrice = allPrice.reduce((accumulator, currentValue) => accumulator + currentValue , 0);
  return (
    <>
      {
        loading ? 
        <div className='h-screen items-center justify-center flex'>
          <Loaders/>
        </div>
        : state.length == 0 ?
        <div className='py-40 flex flex-col justify-center items-center'>
            <p style={{fontSize: '25px', color: '#808080'}} className='pb-4'>سبد خرید شما خالی است!</p>
            <img alt='empty cart image' src='/picture/cart1.png' width={300}/>
        </div> 
        : 
        <div className='flex flex-col sm:my-9 lg:mx-20 sm:mx-10'>
          <div className='flex justify-center sm:px-12 mt-32'>
            <div className='flex flex-col text-center'>
              <div className='done-progress mx-5'  style={{borderColor : '#b78f1694'}}>
                <svg className='relative -top-2 sm:top-0' xmlns="http://www.w3.org/2000/svg" width="38px" height="46px" viewBox="0 0 38 46" version="1.1">
                  <title>Basket Icon</title>
                  <desc>Created with Sketch.</desc>
                  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <g id="Progress-Bar" transform="translate(-519.000000, -17.000000)">
                          <g id="Basket-Icon" transform="translate(519.000000, 18.000000)">
                              <path d="M13.5,38.0892857 C13.0561998,38.0892857 12.6964286,37.7295145 12.6964286,37.2857143 C12.6964286,36.841914 13.0561998,36.4821429 13.5,36.4821429 L18.3200846,36.4821429 C21.4274662,36.4821429 23.9464286,33.963707 23.9464286,30.8571429 C23.9464286,27.7505787 21.4274662,25.2321429 18.3200846,25.2321429 L13.5,25.2321429 C13.0561998,25.2321429 12.6964286,24.8723717 12.6964286,24.4285714 C12.6964286,23.9847712 13.0561998,23.625 13.5,23.625 L18.3200846,23.625 C22.3149915,23.625 25.5535714,26.862903 25.5535714,30.8571429 C25.5535714,34.8513827 22.3149915,38.0892857 18.3200846,38.0892857 L13.5,38.0892857 Z" id="Oval-4" fill="#000000" fill-rule="nonzero" transform="translate(19.125000, 30.857143) rotate(90.000000) translate(-19.125000, -30.857143) "/>
                              <rect id="Rectangle-2" fill="#F04D7D" x="21.2142857" y="13.5" width="4.17857143" height="4.82142857"/>
                              <path d="M2.70595963,19.2395044 L2.36079458,28.2981654 C2.34389658,28.7416439 1.97068775,29.0874556 1.52720932,29.0705576 C1.08373089,29.0536596 0.737919131,28.6804508 0.754817131,28.2369724 L1.10585214,19.0242577 C1.13537785,18.2493722 1.7707195,17.6356295 2.54616256,17.6329118 L35.3721497,17.5178661 C36.1517794,17.5151337 36.7932971,18.1307942 36.8226238,18.909877 L37.7672884,44.0054872 C37.7844283,44.4608187 37.4199397,44.8392857 36.9642857,44.8392857 L0.964285714,44.8392857 C0.508492386,44.8392857 0.143950648,44.4605966 0.161296391,44.0051334 L0.650985959,31.1469039 C0.667875292,30.7034251 1.04107737,30.3576061 1.48455612,30.3744954 C1.92803488,30.3913847 2.27385394,30.7645868 2.2569646,31.2080656 L1.79904268,43.2321429 L36.1298966,43.2321429 L35.222461,19.1255435 L2.70595963,19.2395044 Z" id="Combined-Shape" fill="#000000" fill-rule="nonzero"/>
                              <g id="Group-13" transform="translate(4.500000, 0.000000)" fill="#000000" fill-rule="nonzero">
                                  <path d="M3.99239792,14.9405094 C4.43619817,14.9405094 4.79596935,15.3002806 4.79596935,15.7440808 C4.79596935,16.1878811 4.43619817,16.5476523 3.99239792,16.5476523 L1.58948195,16.5476523 L1.52412315,16.5449899 C0.175987687,16.4349742 -0.654557496,15.6910862 -0.654557496,14.453908 C-0.654557496,13.3177329 0.0393206588,12.4722802 1.26374508,11.9850785 L13.9405149,5.72293861 C14.3384146,5.52638197 14.8203166,5.68960274 15.0168733,6.0875024 C15.2134299,6.48540206 15.0502092,6.96730412 14.6523095,7.16386076 L1.94537923,13.4408994 L1.88103377,13.4692538 C1.20609617,13.7320412 0.952585361,14.037118 0.952585361,14.453908 C0.952585361,14.7741953 1.07759992,14.8920855 1.62355094,14.9405094 L3.99239792,14.9405094 Z" id="Oval-11"/>
                                  <path d="M23.9822402,16.5476523 C23.53844,16.5476523 23.1786688,16.1878811 23.1786688,15.7440808 C23.1786688,15.3002806 23.53844,14.9405094 23.9822402,14.9405094 L26.7264249,14.9405094 L26.7744332,14.9419448 C27.6866414,14.9965409 27.9069895,14.8532609 27.9069895,14.453908 C27.9069895,14.0655818 27.4767856,13.633006 26.4227738,13.2028237 L16.1266018,8.43887423 C15.72384,8.2524833 15.5484368,7.77488064 15.7348277,7.37211882 C15.9212186,6.96935701 16.3988213,6.79395374 16.8015831,6.98034467 L27.0475588,11.721998 C28.6281139,12.370981 29.5141324,13.2662404 29.5141324,14.453908 C29.5141324,15.9260299 28.4222675,16.6430659 26.7033009,16.5476523 L23.9822402,16.5476523 Z" id="Oval-11"/>
                                  <path d="M15.1181799,6.56178596 C14.9963564,6.98853845 14.5516477,7.23573223 14.1248952,7.11390871 C13.6981427,6.9920852 13.4509489,6.54737648 13.5727724,6.12062399 C13.7492656,5.50236145 14.2812652,4.71614217 14.8035344,4.12404992 C15.4588351,3.38114107 15.7270408,2.85318035 15.7270408,2.29591837 C15.7270408,1.46619515 15.0848055,0.803571429 14.3053375,0.803571429 C13.5258695,0.803571429 12.8836342,1.46619515 12.8836342,2.29591837 C12.8836342,2.73971861 12.523863,3.0994898 12.0800628,3.0994898 C11.6362625,3.0994898 11.2764914,2.73971861 11.2764914,2.29591837 C11.2764914,0.589640186 12.6268349,-0.803571429 14.3053375,-0.803571429 C15.9838401,-0.803571429 17.3341837,0.589640186 17.3341837,2.29591837 C17.3341837,3.3209256 16.8985381,4.1784902 16.0087977,5.18718141 C15.6350933,5.61084701 15.2105247,6.23829869 15.1181799,6.56178596 Z" id="Oval-11"/>
                              </g>
                              <path d="M9.80357143,18 C9.80357143,18.4438002 9.44380025,18.8035714 9,18.8035714 C8.55619975,18.8035714 8.19642857,18.4438002 8.19642857,18 L8.19642857,13.2641704 C8.19642857,12.8217624 8.55402973,12.4625705 8.99643341,12.4606069 L28.2821477,12.3750079 C28.727337,12.373032 29.0892857,12.7333777 29.0892857,13.1785714 L29.0892857,18 C29.0892857,18.4438002 28.7295145,18.8035714 28.2857143,18.8035714 C27.841914,18.8035714 27.4821429,18.4438002 27.4821429,18 L27.4821429,13.9857174 L9.80357143,14.0641831 L9.80357143,18 Z" id="Combined-Shape" fill="#000000" fill-rule="nonzero"/>
                          </g>
                      </g>
                  </g>
                </svg>
              </div>
              <p className='mt-2' style={{color : '#b78f1694'}}>سبد خرید</p>
            </div>
            <span className='span-done-progress' style={{backgroundColor : '#b78f1694'}}/>
            <div className='flex flex-col text-center'>
              <div className='done-progress mx-10'>
                <svg className='relative -top-2 sm:top-0' xmlns="http://www.w3.org/2000/svg" width="35px" height="46px" viewBox="0 0 35 46" version="1.1">
                  <title>Shipping Info</title>
                  <desc>Created with Sketch.</desc>
                  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <g id="Progress-Bar" transform="translate(-281.000000, -17.000000)">
                          <g id="Shipping-Info" transform="translate(281.000000, 17.000000)">
                              <ellipse id="Oval-6" fill="#F04C7D" cx="17.2340426" cy="39.9361702" rx="4.78723404" ry="1.91489362"/>
                              <path d="M34.0033325,41.3770549 C34.010521,41.4105758 34.0156317,41.4449417 34.018514,41.4800248 L34.3058338,44.9772224 C34.3440348,45.4419566 33.9771497,45.8404255 33.5106383,45.8404255 L0.957446809,45.8404255 C0.491029916,45.8404255 0.124062846,45.4420731 0.16225365,44.9772224 L0.449573402,41.4800248 C0.452455734,41.4449417 0.457566431,41.4105758 0.464754959,41.3770549 L1.10543462,33.7520914 C1.16794308,33.0081554 1.79000427,32.4361702 2.53656182,32.4361702 L7.70601547,32.4361702 C8.14666819,32.4361702 8.50388781,32.7933898 8.50388781,33.2340426 C8.50388781,33.6746953 8.14666819,34.0319149 7.70601547,34.0319149 L2.68329052,34.0319149 L1.82517343,44.2446809 L32.642914,44.2446809 L31.7847969,34.0319149 L26.762072,34.0319149 C26.3214192,34.0319149 25.9641996,33.6746953 25.9641996,33.2340426 C25.9641996,32.7933898 26.3214192,32.4361702 26.762072,32.4361702 L31.9315256,32.4361702 C32.6780832,32.4361702 33.3001444,33.0081554 33.3626528,33.7520914 L34.0033325,41.3770549 Z" id="Combined-Shape" fill="#000000" fill-rule="nonzero"/>
                              <g id="Group" transform="translate(1.872340, 0.000000)" fill="#000000" fill-rule="nonzero">
                                  <path d="M15.6605188,37.8741002 C16.1070438,37.4218447 16.6966418,36.7669071 17.3634809,35.9796505 C18.8837992,34.1847939 20.6182006,31.930478 22.2137026,29.6399155 C26.3483309,23.7040878 28.9255319,18.4932748 28.9255319,15.3617021 C28.9255319,8.22312797 22.5002763,1.79787234 15.3617021,1.79787234 C8.22312797,1.79787234 1.79787234,8.22312797 1.79787234,15.3617021 C1.79787234,15.8023549 1.44065273,16.1595745 1,16.1595745 C0.559347274,16.1595745 0.20212766,15.8023549 0.20212766,15.3617021 C0.20212766,7.34182252 7.34182252,0.20212766 15.3617021,0.20212766 C23.3815817,0.20212766 30.5212766,7.34182252 30.5212766,15.3617021 C30.5212766,18.9351566 27.8432629,24.3498018 23.5231035,30.5519847 C21.898849,32.8838254 20.1338183,35.1779523 18.5811173,37.0110392 C16.854326,39.0496537 15.9716571,39.9436503 15.3617021,39.9436503 L15.2442349,39.9436503 L15.1317519,39.9097957 C14.275938,39.6522172 11.4742593,36.4270737 8.57513754,32.4750173 C5.11732512,27.7613589 2.35906741,23.1423277 1.09839943,19.6077852 C0.950365671,19.192742 1.16681956,18.736278 1.58186273,18.5882442 C1.9969059,18.4402105 2.45336994,18.6566644 2.6014037,19.0717075 C3.79861912,22.4283478 6.48791006,26.9318859 9.86180697,31.5311514 C12.0870396,34.5645683 14.5200236,37.4267319 15.3386465,38.1877297 C15.4318698,38.101408 15.5398863,37.9962808 15.6605188,37.8741002 Z" id="Oval-5"/>
                                  <path d="M15.3084189,22.2251552 C15.32603,22.223994 15.3437972,22.2234043 15.3617021,22.2234043 C15.7870704,22.2234043 16.2038004,22.1864189 16.6088515,22.1154885 C17.0137346,22.0436056 17.4179824,21.9358305 17.8176978,21.7903459 C18.217444,21.6448502 18.5964198,21.4675493 18.9528076,21.2623409 C19.8612755,20.7366878 20.6438963,20.0177124 21.2444131,19.1616717 C21.8434393,18.3045875 22.2513831,17.3232603 22.4346211,16.2897958 C22.5055621,15.8847154 22.5425532,15.4679542 22.5425532,15.0425532 C22.5425532,14.6171849 22.5055678,14.200455 22.4346375,13.7954039 C22.3627545,13.3905207 22.2549794,12.9862729 22.1094949,12.5865575 C21.9639992,12.1868113 21.7866982,11.8078355 21.5814898,11.4514477 C21.0558367,10.5429799 20.3368613,9.76035898 19.4808207,9.15984225 C18.6237364,8.560816 17.6424092,8.1528722 16.6089448,7.96963421 C16.2038644,7.89869319 15.7871031,7.86170213 15.3617021,7.86170213 C14.9363338,7.86170213 14.5196039,7.89868751 14.1145528,7.96961787 C13.7096697,8.04150077 13.3054219,8.1492759 12.9057064,8.29476044 C12.8888813,8.30088428 12.8719839,8.30640681 12.8550377,8.31133899 C10.125223,9.32832532 8.18085106,11.9583731 8.18085106,15.0425532 C8.18085106,15.4832059 7.82363145,15.8404255 7.38297872,15.8404255 C6.942326,15.8404255 6.58510638,15.4832059 6.58510638,15.0425532 C6.58510638,10.7152678 9.7168108,7.11943119 13.8374085,6.39785446 C14.8644919,6.2155062 15.8949205,6.22213201 16.8861098,6.39787443 C18.1746841,6.62354016 19.3665508,7.13028293 20.3961804,7.85257315 C21.4270652,8.57307065 22.3108901,9.51974277 22.9636648,10.6534243 C23.4678154,11.5247301 23.826469,12.4907501 24.0064009,13.5182596 C24.1887491,14.5453429 24.1821233,15.5757715 24.0063809,16.5669609 C23.7807152,17.8555351 23.2739724,19.0474018 22.5516822,20.0770314 C21.8311847,21.1079163 20.8845126,21.9917411 19.750831,22.6445159 C18.8795252,23.1486665 17.9135052,23.50732 16.8859958,23.6872519 C12.7671067,24.418519 8.59441864,22.1106439 7.11439987,18.0443257 C6.96368776,17.6302476 7.17718809,17.1723947 7.59126621,17.0216826 C8.00534432,16.8709705 8.46319726,17.0844708 8.61390937,17.4985489 C9.6687611,20.3967302 12.3954023,22.2031523 15.3084189,22.2251552 Z" id="Combined-Shape"/>
                              </g>
                          </g>
                      </g>
                  </g>
                </svg>
              </div>
              <p className='mt-2' style={{color : '#c2c2c2'}}>اطلاعات ارسال</p>
            </div>
            <span className='span-done-progress'/>
            <div className='flex flex-col text-center'>
              <div className='done-progress mx-5'>
                <svg className='relative -top-2 sm:top-0' xmlns="http://www.w3.org/2000/svg" width="39px" height="46px" viewBox="0 0 39 46" version="1.1">
                  <title>Payment Info</title>
                  <desc>Created with Sketch.</desc>
                  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <g id="Progress-Bar" transform="translate(-38.000000, -17.000000)">
                          <g id="Payment-Info" transform="translate(39.000000, 18.000000)">
                              <g id="Payment">
                                  <g id="Group-17" transform="translate(18.663240, 14.953345) rotate(-17.000000) translate(-18.663240, -14.953345) translate(2.546219, 4.421430)">
                                      <path d="M0.800328099,1.02743882 L0.800328099,6.84050864 C0.800328099,7.28116137 0.443108485,7.63838098 0.00245575869,7.63838098 C-0.438196967,7.63838098 -0.795416582,7.28116137 -0.795416582,6.84050864 L-0.795416582,0.229566479 C-0.795416582,-0.211086247 -0.438196967,-0.568305861 0.00245575869,-0.568305861 L31.9173494,-0.568305861 C32.3580021,-0.568305861 32.7152217,-0.211086247 32.7152217,0.229566479 L32.7152217,20.9742473 C32.7152217,21.4148492 32.3580814,21.7720478 31.9174795,21.7721197 L0.000989151539,21.7773254 C-0.439690571,21.7773973 -0.796979636,21.4201938 -0.797013323,20.979514 L-0.797872338,9.74237356 C-0.797906023,9.30172083 -0.440713717,8.94447391 -6.09927713e-05,8.94444022 C0.440591732,8.94440654 0.797838653,9.30159885 0.797872338,9.74225157 L0.798670355,20.1814506 L31.119477,20.1765051 L31.119477,1.02743882 L0.800328099,1.02743882 Z" id="Combined-Shape" fill="#000000" fill-rule="nonzero"/>
                                      <polygon id="Rectangle-4" fill="#F04D7D" points="3.82978723 4.14893617 12.7659574 4.14893617 12.7659574 10.5319149 3.82978723 10.5319149"/>
                                      <path d="M4.11316948,15.0027513 C3.67251675,15.0027513 3.31529714,14.6455317 3.31529714,14.2048789 C3.31529714,13.7642262 3.67251675,13.4070066 4.11316948,13.4070066 L11.6290718,13.4070066 C12.0697245,13.4070066 12.4269441,13.7642262 12.4269441,14.2048789 C12.4269441,14.6455317 12.0697245,15.0027513 11.6290718,15.0027513 L4.11316948,15.0027513 Z" id="Line-6" fill="#000000" fill-rule="nonzero"/>
                                      <path d="M21.8809611,15.057777 C21.4403084,15.057777 21.0830888,14.7005573 21.0830888,14.2599046 C21.0830888,13.8192519 21.4403084,13.4620323 21.8809611,13.4620323 L26.0106383,13.4620323 C26.451291,13.4620323 26.8085106,13.8192519 26.8085106,14.2599046 C26.8085106,14.7005573 26.451291,15.057777 26.0106383,15.057777 L21.8809611,15.057777 Z" id="Line-6" fill="#000000" fill-rule="nonzero"/>
                                      <path d="M4.11316948,17.8640866 C3.67251675,17.8640866 3.31529714,17.506867 3.31529714,17.0662142 C3.31529714,16.6255615 3.67251675,16.2683419 4.11316948,16.2683419 L6.97450477,16.2683419 C7.41515749,16.2683419 7.77237711,16.6255615 7.77237711,17.0662142 C7.77237711,17.506867 7.41515749,17.8640866 6.97450477,17.8640866 L4.11316948,17.8640866 Z" id="Line-6" fill="#000000" fill-rule="nonzero"/>
                                  </g>
                                  <path d="M36.2234043,23.9361702 C36.2234043,23.4955175 36.5806239,23.1382979 37.0212766,23.1382979 C37.4619293,23.1382979 37.8191489,23.4955175 37.8191489,23.9361702 L37.8191489,44.0425532 C37.8191489,44.4832059 37.4619293,44.8404255 37.0212766,44.8404255 C36.0200643,44.8404255 35.4700941,44.5214322 34.7797195,43.7938807 C34.7520363,43.7646797 34.7520363,43.7646797 34.7253328,43.7365025 C34.3413801,43.3316715 34.1965197,43.2446809 33.8280731,43.2446809 C33.4349694,43.2446809 33.2686769,43.3447364 32.818619,43.7990008 C32.0842135,44.5402697 31.583676,44.8404255 30.6465571,44.8404255 C29.7143658,44.8404255 29.2067634,44.5429264 28.461346,43.8158415 C27.9824256,43.3487029 27.8060192,43.2446809 27.420005,43.2446809 C27.0399582,43.2446809 26.8798776,43.3422105 26.4432345,43.7901822 C25.7152572,44.5370445 25.214592,44.8404255 24.2783826,44.8404255 C23.3512855,44.8404255 22.8540615,44.5443616 22.1270976,43.8186073 C21.6565996,43.3488925 21.4808326,43.2446809 21.0656998,43.2446809 C20.6454725,43.2446809 20.456573,43.354419 19.9778859,43.8178955 C19.2228166,44.5489659 18.7243687,44.8404255 17.8118767,44.8404255 C16.8834685,44.8404255 16.3909868,44.541529 15.6649103,43.8046998 C15.2117377,43.3448159 15.0467877,43.2446809 14.6556059,43.2446809 C14.2952879,43.2446809 14.1578839,43.3280699 13.7879605,43.7257759 C13.7594925,43.7564098 13.7594925,43.7564098 13.7298466,43.7882958 C13.0510147,44.5175869 12.4974231,44.8404255 11.4893617,44.8404255 C11.048709,44.8404255 10.6914894,44.4832059 10.6914894,44.0425532 L10.6914894,31.3934387 C10.6914894,30.9527859 11.048709,30.5955663 11.4893617,30.5955663 C11.9300144,30.5955663 12.287234,30.9527859 12.287234,31.3934387 L12.287234,42.9731146 C12.3701293,42.9011755 12.4588231,42.8116976 12.5618002,42.7010659 C12.5901401,42.6705844 12.5901401,42.6705844 12.6195252,42.6389639 C13.2620349,41.9481996 13.7551451,41.6489362 14.6556059,41.6489362 C15.5832156,41.6489362 16.0752777,41.9476488 16.8010242,42.6841433 C17.2545448,43.1443802 17.4198067,43.2446809 17.8118767,43.2446809 C18.2048974,43.2446809 18.3840495,43.1399244 18.8511247,42.6876952 C19.6173332,41.9458328 20.1284005,41.6489362 21.0656998,41.6489362 C22.0073795,41.6489362 22.5122497,41.9482721 23.245228,42.68003 C23.7094398,43.1434697 23.8794188,43.2446809 24.2783826,43.2446809 C24.6781595,43.2446809 24.845267,43.1434211 25.2893972,42.6877696 C26.0102365,41.9482279 26.50148,41.6489362 27.420005,41.6489362 C28.3290696,41.6489362 28.8248987,41.9413129 29.5598802,42.6582121 C30.0497032,43.1359893 30.2351562,43.2446809 30.6465571,43.2446809 C31.0521993,43.2446809 31.2229537,43.1422851 31.6778575,42.68313 C32.4076411,41.9465254 32.9022349,41.6489362 33.8280731,41.6489362 C34.731423,41.6489362 35.2269581,41.9465119 35.8831557,42.6383917 C35.9106513,42.6674045 35.9106513,42.6674045 35.9372683,42.695481 C36.0450199,42.8090351 36.1374163,42.9005303 36.2234043,42.973796 L36.2234043,23.9361702 Z" id="Rectangle" fill="#000000" fill-rule="nonzero"/>
                                  <path d="M23.6148396,33.0319149 C23.1741869,33.0319149 22.8169673,32.6746953 22.8169673,32.2340426 C22.8169673,31.7933898 23.1741869,31.4361702 23.6148396,31.4361702 L32.5531915,31.4361702 C32.9938442,31.4361702 33.3510638,31.7933898 33.3510638,32.2340426 C33.3510638,32.6746953 32.9938442,33.0319149 32.5531915,33.0319149 L23.6148396,33.0319149 Z" id="Line-6" fill="#000000" fill-rule="nonzero"/>
                                  <path d="M15.7330452,35.9042553 C15.2923925,35.9042553 14.9351729,35.5470357 14.9351729,35.106383 C14.9351729,34.6657303 15.2923925,34.3085106 15.7330452,34.3085106 L32.5531915,34.3085106 C32.9938442,34.3085106 33.3510638,34.6657303 33.3510638,35.106383 C33.3510638,35.5470357 32.9938442,35.9042553 32.5531915,35.9042553 L15.7330452,35.9042553 Z" id="Line-6" fill="#000000" fill-rule="nonzero"/>
                                  <path d="M20.4202335,38.7765957 C19.9795808,38.7765957 19.6223612,38.4193761 19.6223612,37.9787234 C19.6223612,37.5380707 19.9795808,37.1808511 20.4202335,37.1808511 L32.5531915,37.1808511 C32.9938442,37.1808511 33.3510638,37.5380707 33.3510638,37.9787234 C33.3510638,38.4193761 32.9938442,38.7765957 32.5531915,38.7765957 L20.4202335,38.7765957 Z" id="Line-6" fill="#000000" fill-rule="nonzero"/>
                              </g>
                          </g>
                      </g>
                  </g>
                </svg>
              </div>
              <p className='mt-2' style={{color : '#c2c2c2'}}>اطلاعات پرداخت</p>
            </div>
          </div>
          <div className='md:mx-10 my-10 lg:m-20 '>
          <h3 className='border-b-4 border-black w-32 pb-2 mr-10 mb-20 text-start text-3xl' style={{color : '#333'}}>سبد خرید</h3>
            {
              state.map((item , index) => {
                let {price , id , discount , title , seller , size , img} = item;
                let priceWithDiscount = price  - (price  / 100 * discount);
                !isNaN(priceWithDiscount) ? Discount.push(price - priceWithDiscount) : null
                return(
                  <div key={index}>
                    <div className='w-full flex cart-card flex-col-reverse lg:flex-row-reverse justify-between cart-card lg:px-5 px-6 sm:py-5 items-center '>
                      <Link href={`/dress/${id}`}  className='flex sm:justify-between -pt-7  justify-between pb-4 sm:pb-0 sm:flex-row-reverse flex-col-reverse lg:w-3/4 w-full md:w-4/5 h-full lg:border-none border-dotted border-t-2 border-zinc-300'>
                        <div className='flex justify-around flex-col -mt-14'>
                          <span className='cart-number text-2xl'>{sp(index + 1)}</span>
                          <div className='flex flex-col items-center justify-between sm:block'>
                            <div className='flex items-center  py-2 sm:pb-0 text-zinc-500'>
                              قیمت : <div className=' mr-1'> {sp(price)}</div> <span className='text-xs mr-1'>تومان</span>  
                            </div>
                            <div className='pb-3 sm:pb-0 sm:pt-4' style={{color : '#b78f1694'}}>
                              تخفیف : {isNaN(priceWithDiscount) ? sp(0) : sp(price - priceWithDiscount)} تومان  
                            </div>
                          </div>
                          <div  className='flex items-center justify-center'>
                          قیمت نهایی :<div className='text-xl mr-1'> {isNaN(priceWithDiscount) ? sp(price) : sp(priceWithDiscount)}</div> <span className='text-xs mr-1'>تومان</span>   
                          </div>
                        </div>
                        <div className='flex flex-col text-xl justify-around'>
                          <div className='pb-4 pt-4 sm:pt-0 sm:pb-0 text-center'>
                            {title}
                          </div>
                          <div className='text-zinc-500 text-sm pb-4 sm:pb-0 text-center'>
                            فروشنده : {seller == 'parsstyle' ? 'پارس استایل' : seller == 'lebasina' ? 'لباسینا' : seller == 'کالزینو' ? '' : null}
                          </div>
                          <div className='flex justify-around'>
                            <div className='text-zinc-500 text-sm pb-3 sm:pb-0 ml-4'>
                            سایز : <span className='relative' style={{top : '1px'}}>{size[0]}</span>
                            </div>
                            <div className='text-zinc-500 text-sm pb-3 sm:pb-0  mr-4'>
                              رنگ : قرمز
                            </div>
                          </div>
                        </div>
                      </Link>
                      <div className='lg:w-2/5 -mt-8 lg:m-0 lg:-mr-10'>
                        <img alt='dress image' src={img[0]} width={200}/>
                      </div>
                      <div className='relative deleteBtn'><DeleteBtn id={id} setState={setState}/></div>
                    </div>
                  </div>
                )
              })
            }
          </div>

          <div className='border min-h-96 w-80 mx-auto p-5' style={{backgroundColor : '#F5F4EF'}}>
            <div className='text-xl text-center border-b-4 pb-2 border-white'>
              <h3>اطلاعات پرداخت</h3>
            </div>
            <div className='mt-10'>
              <div className="inputBox mx-auto border-b-4 pb-6 border-white">
                  <input dir="rtl" name="offer code"  type="text"/>
                  <span className="user">کد تخفیف</span>
              </div>
              <button className='border offer-input border-black rounded px-3 py-1'>اعمال</button>
              <div className='pb-6 border-b-4  border-white'>
                <div className='flex justify-between'>
                  جمع کل <span>{sp(finalPrice)} تومان</span>
                </div>
                <div className='flex justify-between mt-5'>
                   تخفیف <span>{sp(Discount.reduce((accumulator, currentValue) => accumulator + currentValue , 0))} تومان</span>
                </div>
                <div className='flex justify-between mt-5 font-semibold text-zinc-800' style={{fontSize : '17px'}}>
                   مبلغ قابل پرداخت <span>{sp(finalPrice - Discount.reduce((accumulator, currentValue) => accumulator + currentValue , 0))} تومان</span>
                </div>
              </div>
              <div className='flex justify-center mt-5'>
                <button className='enter' style={{width : '150px'}}>تکمیل فرآیند خرید</button>
              </div>
            </div>
          </div>
        </div>
        
      }
    </>
  )
}

export default CartPage